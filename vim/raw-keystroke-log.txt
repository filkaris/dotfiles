quick:xfunctionaljggjjjjjjjjjjjjjGkkjkyjjpkojjjk	wwwbllcwShoew€kb€kbwsUpsalePagejjjjbbbbwcw/view-upsalesldwdwdwjjbbbwbllllllllllllllcwOkldi)jdd:wkk€ütrjjjjeeli2/hr21r1:w€ütrjjjjwwwxx$hhi/1:w€ütt		ggjjjjjjjjjjjjjjjjjyypkJi,llC€kb'app'€kb.Upsales'bbhhhhi :wG€üttqggjkjgqgqkkqggjjjjjjjjjjjjjjjjj$iA, 'Up€kb€kbOpe€kb€kb€kbapp.Operations', 'app.OperationTargets':W€ütt€ütt:w€kBkj€kBziGkkkkkkkkkj$hhhhhisky8j8jpkojjjzzkwwwbllcwAddsUpsalejjjjjbkkkkkkkkkkkGjjy15jGkkkkkpzzj=Ggg=GGkkkkkkkkkggjjjjjjjjjjjjjjjjjjjjjjjjjjj===GGkkkkkkkkkkkkkkkkkkkkjvhlupsalehwwcwpatient_idwwwwl
patientcontGkkkkkkkkkk	jjjjjjjjodd$(€kb€kb($data);:wdd:whddwcwoperation_target_idwwljjkkwwjkwwjww€üc	hhhhhhdwllwwci'11j0wwcwoperationwwwwci'10jbbcwcommentswwwliThis is urgentjd8j:wjwwwwj$hi, $datakddwwwcwpost:w€ütrjjjojjjjjjjjky2jGkkkjpkojjjjkkk$bbcwUpsales-wwcwupsalesjww.wwwwwwwbcwoperationbcwpatient_idwwwcf]1:w€ütrjjjjjjjjjjjjjjj:w€ütfr€ütu€ütru:wcssGkkkkkkkkkkkkkkkkkkkkkkkkj$ihjjjjjjjjjbcw€ýg#d64635€ýgbxuhxkkkkjhct;€ýg#bfd635€ýgjjkkkkkbhct;€ýg#35d63b€ýgkkkhjjjjjjjjjbhyt;kkkkkkkkkvt;paff:whcw99:wjjkkjjjjjkkkkkbhct;€ýg;€ýgi€ýg;€ýgi€ýg#fb533f;€ýglxxxibbjjjbjjjjjjhC€ýg#fb533f;€ýgkkkkkbbjjjhC€ýg#fbe03f€ýg;kkkkkjjbbC:€kN€kP20kA€kb€ýg#52fb3f€ýg;:wviewupsa29j$hhhhhhhi ?: ""*"hhxcs"':wu,a:wjjjjjjjjjjjjjjjjkyypl0wwwwct?__() hi'DS€kb€kbSelect a tooth to add a new upsale:a':w€kh:wappointedijjjjjjjkkkkkkkkkpap€kb€kb€kbappocontGkkkk	jkkkkkkkkkko$showUpsaleLink = true;jkjjjjjjjjjjjjjkkkyypwcwshowUpsaleLink:wGkkkkkkkkkkkkkkGkkkkkkky2j2jpwwwwlct)showUpsales hcwLinkjwwwci'Upsaleswwwbcwcontrollerbucwactionwwwi'viewUpsales,€kb', 'controller' => 'Patients', w€kbwwwwipatient-f>;l;wehi->ww:wu,a:wGkkkkkk$bbbbbbbbbbhxhr_:wmai/yellow/t€kbbtnvc€kb€kbvss€kb€kb€kb€kbcssncssncssn:bd:bd:bd:bd
$bkj$bbbcwgreen pull-right:wkd2jp:wjgjwi mr-2::wkjbbb------------jjjjjjjjjjjjjgkh€ühcomponent/marginnnnnnnnnn/pull-rightnnnnnnnnnnnnnnnnnnnnnn.mr./.mr/€ku€kl€kl€kl\:€ku€kd€ku€ku?/€ku€kbargin-rightnnnnnwwgjbbbhcwargin-rightlls10:wbbwwli, 'target' => '_blank':w€ü2
contkkkkkkkkkkkyykkp$bcwfalseddkkp<<:wupkjappoinupsalzi/modalupsalectGwwivanilla-jjjbb.jnnn:w
ctpkkjjjjjjwwwwwwwcwcommentskkkkkkbcitComments:w
cont
contGkkkkkkkkkkkkkkkkkkkkk$bbbbbiIncompleteFirst:wuhw:wwwwiIncompleteFirstjjjjjjjky2j2jpkA,jcworderjcwdate_cokmpl€kb€kb€kb€kbp€kb€kbm€kbompleted desc€kb€kb€kb€kbxli => 'desc':wkkkk
contjjjjjjjjjjjjjjjo$ukkkkkkkkkkkkyyjjjjjjjjjjjjjkp>>:w
upsaGkkkkkkkkkkkkkkkkjwwwwwwwwwwwlwwwCNul€kb€kb€kbnull:wkjA;:wdd:w
jsjjjjjjjjjjjjjkkkkoclearod€kb€kbModalFields();kkkkoconst clearModalFields = () => {}kkkkjjjo$("@€kb#operation").html€kb€kb€kb€kb€kbhi_type$A.val('');yypwwcwcomments:wkllr-:WggG
Gkkkkkkkkkkkkkkkkkkkkkkkk$bbbbbbbblllci"closeModal:wbi() >i=wwwbi() bbblli wwwhx:wuuuuuuggk:wwwwwjwwwwwi():wkj
kkkkkkkkkkkkyypwcwcode€kb€kb€kb€kboperation_target_idwwwlcwasc:wbbbbbcwcreatedwwwwcwdesc:w
upsa
upsalgg
ggjjjjjjjjkkjkjjjGkkkkkkkkkkkkkkkkkkkkkyyyypwwclcwDate€ü	€kb€kb€kb€kbjjjjjjyypwwwwwwcwcreatedlldt?:wbbwwhi->format('d/m/Y'):wkkkkkkkkkkkkkkkkjjjjjjjjjjjjjjjjjjjjwwwwwwwwls12jhs12:wkbbbbbdWjbbdt/>dt>:wkkjwwwi margin-bottotm€kb€kbm-10:wjjjjjjjjjjjki <?= $row=€kb->date_completed ? bbbbbbbllliclass="$hi 'in€kb€kbcompletedone' : 'inconm€kb€kbmplete' ?>":wkkkkkkkkkkkkkkkkkkjbbbbiupsales :w
maiGujjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjo.upsales .donebhitrA {}kyjjp$bbwcwincomketehhhcwpletekkkkkkkkkkkyy11jpjjjjjjjjjjjjjjjjj$bbbbwcwe€kbpending:wkwwwcwpendingkjkyykkjpcwbackground-colorjjjbbbb.kkkkkkkkkkkkkkkkkkuuuuuuuuuuuuuuuujjjjjjjjjjkkkkkkkkkkyykkkkkkkkkkkkkkkkkkkpkddjjjjjjjjjjjjjjjjjkkkjjwwwwlce16kbywpabbjjjibb:whcwaakkkhcw77jjjh.:w2€kbjkhhlcw55kkkh.:w
upsak$bbcwasc:w:q:bd!:q:E c€kbdo€kb€kbcom	ziGkkkkkkkkkkkkkkkkkjjdockerzireaGkkkkkkkkkkjjjjjjjjjjjjjjjj
.emigrationzi€üjkj0wwww*ddn.n:wmigranddn.:wmigranddn.:wadduser/StopwatchnnnNnNkkkkjjjjj0wl*zznnnndjndd/eventhhhdt);j$bbbbBBBhhh..xlkkk:w€üj€üj$bbbbbbbbbbbbbbbbbbbbdt':wkkkkkkkkkkkkk€üjgg/Stopdd:wnaddusernziG€ütfmigrarm ueditpaschangepaGkkjddk.:wcompojjjjyypkA,j0wwcwdbwwwci":e u:e .e		wwwwci"echo ${}iM€kb:e .e		wwwwwwk$hiS€kbDATABASE_USER:wds}:wu:wbbbbwwci"€ýg$ mysql -h127.0.0.1 -P3307 -ugoalsetting -p goalsetting€ýgkJx0-wwjwblxxwwwwwwwww:w
dock:E TO	:E €üwjjjjjjjjjjjk%M€kbBackupCommand.php,po€ürkddvaddusercohlggjjjjjjjjjjjjjy11jhjjjjd6jjkddjk$bbwcwMo€kb€kbCommand€ülhjjljjjjjjjjjjjj	kjy8jhjkkpjGziokkjjkkkkkkkkkkkkkkkkkkkkkkkkkkkkkwwwwwwlldt)jjjjjd2jkk€ürjjjjjjjjjjwwwwcwapplldwxcwbackupjjjjjjjjjjjjjjjjjbbbCthis>em->zzgg€üjggjjjjjjjjjjk$€ü€üjzzAgg€üjAhhhhi-AgetConnection();kbbbdd:wgg€üjwwwdd:w€üjwwwwwwwww€üj€ü:w€üjzz$bbb€ü:wbbbb€ü:w€üjkkkllllllllidocker -€kbrun -it --rm mariadb :wcocdockerjjjj$bbbbbly$wwwwwwwwwwwwhhhbhi:€ýg<?phpnamespace Sidus\DatabaseMaintenanceBundle\Command;use Doctrine\DBAL\Connection;use Doctrine\DBAL\Platforms\MySqlPlatform;use Symfony\Bundle\FrameworkBundle\Command\ContainerAwareCommand;use Symfony\Component\Console\Input\InputArgument;use Symfony\Component\Console\Input\InputInterface;use Symfony\Component\Console\Input\InputOption;use Symfony\Component\Console\Output\OutputInterface;class MysqlDumpCommand extends ContainerAwareCommand{    /**     * @throws \Symfony\Component\Console\Exception\InvalidArgumentException     */    protected function configure()    {        $this            ->setName('sidus:database:mysqldump')            ->addOption('connection', 'c', InputOption::VALUE_OPTIONAL, 'The name of the doctrine connection')            ->addArgument('path', InputArgument::OPTIONAL, 'The path of the file to dump the database')            ->setDescription('Command alias to mysqldump with the proper parameters');    }    /**     * @param InputInterface  $input     * @param OutputInterface $output     *     * @throws \Exception     *     * @return null|int null or 0 if everything went fine, or an error code     */    protected function execute(InputInterface $input, OutputInterface $output)    {        /** @var Connection $connection */        $connection = $this->getContainer()->get('doctrine')->getConnection($input->getOption('connection'));        if ($connection->getDatabasePlatform()->getName() !== 'mysql') {            throw new \LogicException('Only MySQL database is supported');        }        $path = '';        if ($input->getArgument('path')) {            $path = " > '".escapeshellarg($input->getArgument('path'))."'";        }        $host = escapeshellarg($connection->getHost());        $port = escapeshellarg($connection->getPort());        $username = escapeshellarg($connection->getUsername());        $password = escapeshellarg($connection->getPassword());        $database = escapeshellarg($connection->getDatabase());        $cmd = "mysqldump -h {$host} -P {$port} -u {$username} -p{$password} {$database}{$path}";        passthru($cmd, $return);        return $return;    }}€ýgui:ko€kI€ýg<?phpnamespace Sidus\DatabaseMaintenanceBundle\Command;use Doctrine\DBAL\Connection;use Doctrine\DBAL\Platforms\MySqlPlatform;use Symfony\Bundle\FrameworkBundle\Command\ContainerAwareCommand;use Symfony\Component\Console\Input\InputArgument;use Symfony\Component\Console\Input\InputInterface;use Symfony\Component\Console\Input\InputOption;use Symfony\Component\Console\Output\OutputInterface;class MysqlDumpCommand extends ContainerAwareCommand{    /**     * @throws \Symfony\Component\Console\Exception\InvalidArgumentException     */    protected function configure()    {        $this            ->setName('sidus:database:mysqldump')            ->addOption('connection', 'c', InputOption::VALUE_OPTIONAL, 'The name of the doctrine connection')            ->addArgument('path', InputArgument::OPTIONAL, 'The path of the file to dump the database')            ->setDescription('Command alias to mysqldump with the proper parameters');    }    /**     * @param InputInterface  $input     * @param OutputInterface $output     *     * @throws \Exception     *     * @return null|int null or 0 if everything went fine, or an error code     */    protected function execute(InputInterface $input, OutputInterface $output)    {        /** @var Connection $connection */        $connection = $this->getContainer()->get('doctrine')->getConnection($input->getOption('connection'));        if ($connection->getDatabasePlatform()->getName() !== 'mysql') {            throw new \LogicException('Only MySQL database is supported');        }        $path = '';        if ($input->getArgument('path')) {            $path = " > '".escapeshellarg($input->getArgument('path'))."'";        }        $host = escapeshellarg($connection->getHost());        $port = escapeshellarg($connection->getPort());        $username = escapeshellarg($connection->getUsername());        $password = escapeshellarg($connection->getPassword());        $database = escapeshellarg($connection->getDatabase());        $cmd = "mysqldump -h {$host} -P {$port} -u {$username} -p{$password} {$database}{$path}";        passthru($cmd, $return);        return $return;    }}€ýgujkddyypwwwwdEkwwwwwwwwbpjdd:wkodd($cmd);:wreao## Database issuesWe have 2 wayt €kb€kbs o€kbto acces the€kb€kb€kb€kbs te€kbhe db## # locally installed mysqluse mysql -i€kbIjust Ah 127.0.0.1 -p 3307 -ugoalsetting -p goalsettingEssentially, using local install to go€kb€kbconnect to another host via localhost (since port 3307 is exposed to localhost)### dockerized mysqlyypkkkkkkkkkwwsmanyjjjjjjjjojwexubiexec inside kkkkkkbblbbdwdwko```yyjpjjjkkkkky2jjjjjjjpkjjjjkkkyypdwdwxA€kbkdd<<.wwwwwwi--network=NETWORK joTY€kb€kbYou need tokkkwwwwwwwwjjja know the network bireq€kbsulting A €kbfrom docker-compose, and the service name to puth the €kb€kb the containers in the same network so they can communitca€kb€kb€kbcateIt would be bad to hardcode ths, €kb€kb€kbis, but once ie€kb€kbeverything is in a €kb€kb€kb€kb€kbdockerized thiw €kb€kbs will be easyjjjjjkkjjkkkkkkkky2jGpkjjwwbcwexecwwwcw12_db_1bcwCONATA€kb€kb€kbTAINER_NAMElldw..........wwbdw.........jjjoJust run ex€kb€kbmysqldump from insidekkkwhllllllxxxxjjjja the container itself, nb€kb€kbbut you need to know the container ma€kb€kbname:wwwwwwwwbbcwexect€kbwwwdW.i12_bd_€kb€kb€kbdb_1 wbblwcw{$container}bwiNa€kb€kbwwwwbdW....ukkkkkkdjjjjjj:wkkko$container = getenv("DOCKER_CONTAINER_NAME€übblliDB_A");>>.:we:e ,e€kb€kb.e			€kBGkkkkkkkkoDOCKER€kb€kb€kb€kb€kbATABASE_CONTAINER=pua€ýggoal-setting-club_db_1€ýg:wwwwwwcwDATABASE_CONAIN€kb€kbTAINER:wkjbbbddjwwwwwwwwwwithis->ggjjjjjjjjjjjjjjjjjj$i, stirng €kb€kb€kb€kb€kbring $containerNameGkkkkkkwwwwwwwwwwwwwiName:w€ürgg:wjjjjjse€kb€kbconfiservziGo	A€kb	AppkkA\Command\BackupCommand:args>>A:>>==o- Aenv€kb€kb€kb%%hC"%%"hhillienv(DAA€kbTABSE_€kb€kb€kbASE_CONTAINER)>==:wkliument:wjyykjYYkjkkI//€üj.j.uukugc2j:wxxjxxjxxwwwwbbbs$containerName::wGkkkkkkkkkkkkkkkkkkkkkkkkkkkkkd7jggjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjd2jkojGkkkkkdd:w
GkkkkkkjjjjjjoUSING THIS, with container_name as env var:wc€kbkj
/dot
dedepl/envn€ühsymfonyrecipsymfongg€ührecu€kbipsym4kjjjjjjjjjjjjjkyyjjjjjjjjjjjjjjjjjjjjjjjpkdd$bbllli.local:w:E e€kb€kb€kbe e	€kb	€kb.e			j:e ,e€kb€kb.env	kk$r6jjwwD:wu:wu:w:e :qqenvjjjjjjjjjjjjkjjjjj:w:e de	jjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjkkkkkkkkkkkkkkkjjjjjjjjjjjjjjjjjjjjjkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkjjjjjj$bbjjjjjjjjjjjjjjjjjjjjjjjjjjjkkkkkkkkkjjjjjjjjjhhhhchct'goalsetting.club:w:e R	o$#€kb€kb##BA€kb€kb BackupsRunning cron root cron job to be able to access odckerdocker container```yypko,pkdd<<o$()h,pkJ:w,ybbBwwwwwwwwwwldt$:w,yykkoRunning twice daily 00:00 and 12:00:xjslayouhhhhhjkhhhhhtemplatesjjjjjjjjwjGkkkkkkkkwwwebzijjjjjjjjjjjjjjjjjjjjjjwwwwwwwwjgfzi:bddd:w:E :€kbpa	zilogintwig6jww*ddnG/loginnnnu:wj
wwwwwwwjlgfzijk:e com	ziGkkkkkkkkkkkk
webwwww,gjjjjjjjjjjjjjjjjjjjjjjkkkkkkkkjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjkkkkkkkkkkkkkjkkkkkjjjjjjjkkkkkkkjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjkkkkkkkkkkkkkjjjjkkkzikjoblogo€kbconto€kb ommentjjjjjjkkkkkk
prprogressrepocontG€üwjjjjjjkkkjjjjjjjjjjjjjkkkkkjjozi
€üwjjjjjjjjjjjjkjjjjjjjjjjjjjjjjjhjjkjjbasezio/rssdd:wGkkkkkkkkkkkkkkkkkkkkkkkkkkkkkwwwkwwwwwwwwwwwwwct<Goal Setting Clubjddjjkjdatk:we:e .e				:e :e phpu	zi:e .e		jjjjjjjjjjjjjjjjjyyjjjjp:Wdd:wu:wkyykp:wggyGuuuuuuuuuuuuu:w:€kb:w .e.€kbnv.test.local:e .env.te		GggvGpkdd:wGiD:wddaddusertestIzuzijjjjjjjjjjjjjjkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkgg€üwjjjjjjjjjjjjjjkkjjjjkjjjjjjjkkkkkkkkkkkdFunctionaljjjjjjjjjjjjdControllerj%ProgressRepoer€kb€kbrtController.phpblogcontblog co€kb€kb€kbcontyGhP€ürkkkjhjd8jjjjjjjd14j12k	jjjjjjjjjjjjjjjjjjjjjjjjjkkkkkkkkkkkk	kkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkjjjjjjjjjjjjjjjjjjjjjjjjjjjkkjjljjjjjjjjjjjjjjjjjjjjkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkjjjjjjjjjjd16jjjjjjjjjjjVGkkdkkkkkkkkkkwwwwvprogrecc€kb€kbsscontgghjjkkko/** #€kb@test */jwwbcwitShowsIndexjjjlsecurityzihjjjwwcwprohhdwdwdwdwxlhiproge€kbress-report:W€ütrj€ütr:w€üttl
servserviphjp€kb€kbpujjjjjjjjjjjjjjjjjjjjjjjkkkk:e .vir	€kbmr	zijjjjjjjwwwdwxwldwxjjwjwlwwdwxbbbbdwkkjjjkxjjjkdwxwwdwx:w:qa:u:x:qa:q!:qa!testsfu€üh€ühgf€kbfun€kb€kb€kb€kbfunctional€ütfGzijjjjkk€ütr€ütfjjjjwwkwwwcwadminjbcwadmin1:w€ütr€üt€ür€ütf:e phpou	€kb€kb			zi
se
securityzisecurityzijjjjjA€kb€kbgg=GGoprovider:omemory:users:test: { password: '123456' {€kb€kb, roles: ['Ro€kbOLE_USER'] }:w
prog€ühprogconttestfunctionaljjj$bjk$bbcwtestjbcw123456:w€ütr€ütfkkkA "test_users"jdG:wkkjjo€kb€kb€kb[€kbproviders:p<G..kotest_users:jGkk>G:w
:bd€ühfunctionalziGkkk:w€ütrkkkkkj$xbhx:w€ütt

serjjjjjjjjd11j:w€üttu:w€üttGkkkkkkkkkkkkkkGkkkkkkkkkkkkkkkkkkkkkkkkkkkkkd3jjjjjjjujjjjjjjjjjjjjjjjjjjjjjjoprovider: database_users==:i  :w€ütt
jjjjjoddujI$response = jjwwwwwwkkuo$response -€kb= $client->getResponse();jjwwwct(responselxxkkodd($response->getContent());:w€üttjy4j
ttes€kb€kbes€kb€kb€kbest
teskkkkp=Gujd2jok$bcwplain:wgg=Gu=j:wjjjjjjjjdGkkkkkpjjjjow:wkkkkkkkk€ütt$bcwtext€kb€kb€kb€kbnone:w€ütto€ýgSymfony\Component\Security\Core\User\User€ýga: 'none'kdd:w€üttjk$bcwplain:w€üttjkillitext:w€üttggyGjjjr:wuuuuuuuuuuuukkkuu$bbjjj€ütr:wjj€ütrjjjjjjodd($client->getrR€kb€kbResponse()->getContne€kb€kbent());:w€ütru:w€üttjjjjjj$hhi/:w€ütrjjjjjjjjjjjjwwwwwwwwwhhhhr7:w€üttu:w€üttqkjj$hi, fullname: 'Test User':w€üttu:wcontrollertestziboot€üwjjjjjjjjjjjjjjjjjjkkkkjkkkjfixo14j		jjjjjj		
test
fkkkkkkkkkj	j	
userjjjjjjjjjjjjjjjG31ky2jkkkkkpjjokkkwwwwwwwwwwcwApp\FixtureswwkjCload();jd2j:wkokwwwww
wwwwwwwwwwwwiData\App:whjkhhiFixtures:wlkjlljjkkyyPwcwemjbcwfi€kbhdwdwdwk$bbbbbci"ci'doctrib€kbne
jk$bbbllC;:wjjjj
kggyGGPkojjjko/*ddkkkdG:E deo		€kb€kbo		e doc.€kb/user €kb€kb€kb€kb€kbtestUserMempory€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kbUserMemot€kbryProvider.php€kb€kb€kbmdggyGPzidjkO```yyGpkggOWhen we run tests, we want to have some other users to authet€kbntivc€kb€kbcate asHere, we €kb override the symfony providerbbcwdatbasehhhiaA with another one in memir€kb€kbory wherewe define the users on the€kb€kbhe spotUnfortunately, this does not make them the correct entity class, u€kbnb€kb€kbbut a symfonycore one, so it's not really usable:wjjjjjr:w
jjjjI//:w€ütrjjjkdjjjjjpkojjo:w€ütrjjko$containerddjjjpujpkokkkkkddjjjjjA = self::$client->getConta9€kbiner();jjjkbbbbbbbct(containerlxxj0wlcf)container:w€ütrjjjjjj
/selfadmintestnnblogtestncontrollertestnzizi/::nnnnnn:bd:bd:bd:bdwwjwkwkkwwwwwcwkernel:w€ütr
conconfigsezi/Fix
zi
jjjjjjjjjjo€ýgApp\DataFixtures\AppFixtures€ýg>>...i kjdd:w€ütrq€ku€kuqjjjjjjjjjjjjwwwi\www.:w€ütq€üttcommandtestzijjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj/selfzzkkjyykkkkkkkkkpojjjjjjjkkjd2jud3jkkkkkkkpjjjjjjjjjdd:w€ütrkjjjjjjj$ii$em:w€ütrservijjjjjjjwkkwwwwwwwwwbb,gzijjjjjjjjjjjjjjjw,gkj$
$,gjjjjjjjjjjjjjjjjjjjjjjkjkkk$€üc€üco
kkkkd4jko$this->loadkkkkkjjjjjaFixturesa();:w€ütrjjdj
:e do				ds	€kb€kb	GoggO# Running Tests ## U€kbAuthentication?We cannot h€kbuser €kb€kb the memory procider ec€kb€kbbecause it looks like you cannot customize the User ObjectWe have to su€kb€kbuse db provider, same as i €kbn prodTo do that, we be€kb€kbneede €kb€kb ot loato load fixtures o€kbonce when the tests beginHJOW€kb€kb€kbOW AFAMGAMW TIN PANAGIA MOU?€kbo### Memory the€kb€kb€kbProviderbbiThe kodd:wjjjjjGoDebiug€kb€kb€kbiug€kb€kb€kbug:```yppkkjjjkYpkobin/console config:dump-reference security:wproreditzi/adminnvprogreaddzijjjjjjhjkgfadminblozilkjh:q:qa:q!progr€kbtestzijjjjjjjjjjjjjjj€ütrkkkww€ür:wjjjjj€ütrjjdduujjjjjddko$self€kb€kb€kb€kb€kbvcommandtestzijjjjjjjjkyyhpkdd:wo$container-.g€kb€kb>get('App\DataFixtures\L€kbF€kbAppFis€kbxtures');:w€ütrljjjjjjjjjjjjjjjjjjjjjjjkkyyhkjjp:w€ütrl
configserizijjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjkjyGGpkojjjjjkkcwDataFixturesllwcbcwappFixturesb~:jdj:wwwwwj:wh€üttjjjjjjjjjjj$hhxuxuhx?:w:wlkjl
jjjjjjjjjjjjkhjkkkkkkkkca'AppFixtures::classbbb€ü:w€ütrlggjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjkkj€ütr€ütfGkkkkkhjjjjjjjjklgghggjjjjjjjjj$bbwctTKernel:wjjjj€ütrkkk$€ük$€ü:w€üttjjjj€ütrkkkuu:wjjjjjjjjjjkkkl
servdddd:w€üttkjjuuopublic: true:w€ütthi->load($em)ko$em= $container->get('doctrine');jjjjbbcwjane_adminjbbcwkitten:w€ütrkjjjjjj$hi->getObjectManager():w€ütrjjjjwwkjj$bbblllllctMEntity:w€ütrjjjjjfEdtM:w€ütrlhdoctrinezi/fixtufixtureziwwbhjjjj€ütrl34G50Gzz€üt€ürt€ütt€ütkj€üttlllllll*nnnnnggjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjkjjjjjjjjjjjjjkkkkkkkkkkkkkkjkodd($user);:w€üttbbcwusername:w€üttdd:w/eferencennnnnjjjjjjjjjjcjjdd...ko,p=Gjjwwwkwww€ü$bbbbbcwbin/console doctrine:fixturesbbbdt'hxwwci'doctrine-fixtures-loadbbbhr:wwr::w€ütrjjdjjjjjjjjjjkkj$hii/:w€üttj^xx:w€üttqkkkkkkkkk
/admin:wjqkkcomment:e c€kbsch	djdd:w€ütt
:w€ütrjjjjjjjjjjjdd:W€ütr
appjjjjjjjjjjjjkI//j.:w€üttjjjjjjjjjjjjjjdd:w€üttGkkkkkkkkkkkkkkkkkkkkkkkkkjI//j.:w€üttuuu::wkkkkkkkkkkkjjjjjjjjjjjjjj
uuuuuuuuuuuuuuuuuuuu:w€ütrjjjjj
protestzijjjjjjjjvhjjjjjd3j:w:e :€kbte		Tr	LoginTrait.php€üroLo€kb€kbclass {}€ürukkjjjjkk$bsu$is:w:db€kb€kbbd!:e te		T	LoginTrait.phpjjjjcwTrabcwtraitlliLoginTrait :wjo,p:wdd:wjouse LoginTrait; bb€üojjjjouko$this->logn€kbing();hhhxjjwwwlC);jdjdjjkko:wjj€ütrjjjj€ütt188G18Gwwwwwwwlhhh~:w€ütt9Gwwwwwww€üttkkkkkopublic function setUp() {}yykpu
,puo€ü,pkddo€ýg        $this->client = static::createClient();€ýgkdd==jjjjjjjjdjwithis->€ür:wkkkk€ürkkkkkkkkkkj$kkk€ütf€ürkj€ürjjjjjoprivate $client;:wjjjjjjjjjj€ütrjjjjjjjjjwwww€üjjjjl€ü:€ü:w€üttggjjjjddGkkkwwwww€ü:w€ütt30Gwwwwwwwwwwithis->:w€üttkkklwi.€kb/jdd:w€üttukoujxx:W€üttkj:w€ütt/cliwwithis->:w€üttk$hhkkkkkkv
sesecurityzijjjjjjjjjjjjjjjjjjjjjjjhkkkkkkwwwlcwmainjjjjkjjjjjkkjkkkkwbcwmain:w€üttGkkkkdd:w€ütto:E do				 €kb	jjjjjjjjo$$ €kb€kb€kb## F## th€kb€kb€kb€kb€kb* that€kb€kb€kb€kb(€kb€kbc€kb*ck thatJust i€kbusing€ükkkjbbhi\jjA loginT€kb Trait and creating custom sessions€kbIn the €kb future when we will need fixtures to doe €kb€kb something more complicate'€kbd, we'll seec€kbwe can just insert them right into the ts€kbest if needed:w:qprogrerepotestvhjozilvprogrepoconthjjjjjjjjjjjjjjjjjjjjjwwwwbllctIGetsky8j8jpkojj$bhhhhhcwAddjjjj$hhias€kbdd:w€ütfljjjjjjjjjjjjjjhGkkkkkkkkky8j8jpkojjjkwwwbllctAPostslj	hbllcwukkkkkkkkkkkkkkkkkkkkcwShowsIndexPagejjjjjjjjjjjbkbjwwbllcwShowsAs€kbddPagejjjjjjjjjjjjkkbbcwitAddsNewProgressReportl	kkkkkk	hkjjjjjwwwwbbbbbbbcwPOSTjjo$this->assertPost€kb€kb€kb€kbProgressReportAddedhhhhhhhhhhCS€kbsCount(1);yykkkp$hhr0ddkkkpjjddkkojjjjkkkjdduddjpkkkjjwww€ücGkkkkwwwwjjoprivate function kkkkkbjjbbbbywjjjj$pa(int $count) {}koreturn false;:wjwbbS$this->assertEquale€kbs($count, $progressReportsbbicount(A));ko$aprogressReportCrepository = self::$kernel->getContainer()->get('P€kbApp\Repositoy\Po€kbrogressReportReporit€kb€kb€kbsitory');o$pro€kbof€kbgressReports = $repositoy€kbry->kb$bblprogrereporepozizihGkkkAfindLatest(1);:wokkkkkkkkk€ütrjjjjjjjjjjjjjjwwwwwwwwwwwwhrisryw€kb:w€üttvconfigservziGdk:w:bdbbbbbbbbbcwcontainerldwdwdwuxx:w€üttkkkkk€ütt€üttjjjjjjodd($progressReports);:w€üttkwwwbzzy17j17jKkkkkkkkkkkkkkkkkkkpjkwwwbcwgetAlllldi)jjjddudjdddjddkA;jjkddjdjdjddwwj		zijjjkkkkkkkj$bhhxxxli->jjjjjjjjjyjkkkkkkkkkkpjjddjddkddkkkwdwcwreturnllxx:w€üttwwwwwwcwgetAllllx:w€ütt:w:w€ütty2jukky5juuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuuu:w:bdprogrep€kbrepositoGkkkkkkkkp		:W€ütt	jj$i'p':w€üttjjjo:wjdd:w€üttkkkkkkkkkkwwww$hi, []ivhl
r€kbprore€kbreportypezihwbhlliko'title' => 'MY€kby PR',yypwcwcontent:w€ütrjjjjjjjjjjjjddkkp:w€üttyyko$€kbdd($this->client->getRepos€kb€kb€kbsponse()->getStat€kb€kb€kb€kbContent());:w€üttqokdj:wddpko:wokkkkkk$bwi[],[],A],json_encode([jjjhi_€kb):;w:w€ütrjjjjjjjj
jjjjjjjjjodd($rp€kb€kbprog);:w€üttddkkkkkjjjjjjjjjjodd($form)dd:w:e ~/Dow																			mi€ühmigrationop€kb€kbaddnomzijjjjjd6jjjjyykpwwwcwaddColumn('nominam_€kb€kbl_cost'm€kb, int''€kb€kb€kb€kb€kbmigrationappoizijjjjjjjjy4jVpkj$bbbbbbwcwnominal_cost:woperastionoperationseezijjjjjjjjjjv
ggjjjjhlhlkk*hn$i, €kb€kbikja, 200jhi, 300ljjjjj*hnkkkjjj$hi, 195jhi, 280jhi, 80jlhi, 220jhi, 280j$hi, 12€kb80jhi, 280jlllllhi, 80ljjjjjjjjjjj*hjjjjjjjjjjjjhi, 200jhi, 300jzzhi, 1000jll$hi, 300j$hhli, 800jh€kb€kbjh€kb€kbjhi, 450ggjjjjjjjjjjjjjjjjjjljjjjjjjjj*hnjjjjj$hj$hi, 2€kb30ljj*hnzz$hi, 150jh.hhcw200hr5jhi, 200jhi, 200jhi, 350ljjjjjjjjjjjjkkkkhkkkkkkkkkkkjjhi, 60ljljj*hnzz$ii, 650lzzhjhi, 750jhi, 80j$hi €kb, 130j$hi€ü,li, 300ljjjjjjjjjj*nzz$hhli, 45jlllllllli, 30jhi, 80ljjjjjj*zzhn$hi, 120jllllli, 250ljjjjj*hkkkkkkkj$hi, 40jh.j$h.kbbr3ljjjjjj*hn$hi, 45jhi, 250jlllli, 150j$hi, 450ljjjjjjjzz*hn$hi, 80jjkli, 0ljjjj*hn$hi, 250jh.:wogg
jk/, 0GNNNNNbbbBBBw€ü*nnpatienfinajjjjjjy32jPjjjjjjjjkkkkkd3jjjjjjjjjjjjpjjjjdat..kkkkkkkkkkkkkjjjjjjjjjjjjjjjjjjjkkjjwwwwwwwwwci'ujjjjjjjjjjjjjjjjkd7jkkkkkkkkkkkkkkkkV11jpjjjjjjjjjjjjkkkkkkkkkkkky7jjjjjjjjjjjjjVjjjpjjk$bbbbiPotentin€kbal jjjjbbiPotential wwcwUpsoldbky3j:wu,a:wkjjjjjjjjjjjy2jy3j3jpjjkwwwwwddS&nbsp:wa;:wkJJ:wkkkyjjjpwwwwwwdigfditj.jddkkj$bbli&nbsp;:wjjjd24jkjkkkkkpjjkkwwwwwcwFinancial Datajjjjjjjjjjjjjjjjjjjjjjjjjjbkjbbkci'Appoitnemt€kb€kb€kb€kb€kbntment Frequencykkkkkkkkkkkkjjjjkwwbwbbdwwwi fomr €kb€kb€kb€kbrom Upds€kb€kbsalesjjjjbbbbdwwwcwClaimedkkkbbbcwukkkjjjjkcwpotentialIncomejjjjb.liClaimed:Whhhhhh:wpatientcont24j		jjjjjjjjjjjj	zzjjjjjjjjjjjjjjjjjkkkkkkkyypuo$potentialIncome = $this->upsale->ger€kbtUpsaleS€kbCostForPatient($patient->id);bbyypwwhiClaimedwwwwwcwappoinuwwwhhhhhhhhhhiClaimed:wjbkk€ücziGkkk$bbliint llcwpaite€kb€kb€kbtientIdy2j2jpkojjk$bbbbhhhhhhhhhiiClaimedkkkkkkkkkkkkkkkkkkkkkkkkkkGkkkkkko$thi-s€kb€kbs->table-.€kb>fiun€kb€kbnd('all' €kb, '€kb[]);kokI$requ€kb€kbsults = o'condig€kbtions' => []jddkkokko'fitl€kb€kbelds' => []a,jjja,kkkocon€kb€kb€kb'contain' => [],lko'P€kbOperations'kkko'operakd2jjjjjddjoforeach( $resuilts €kb€kb€kb€kb€kblts as $upsale) {}kko$total = 0;jo$otal €kb€kb€kb€kb€kbtotal += $upsale->operation->nomian€kb€kb€kbinal_cost;:wjoreturn $total;kkkkkkkkkkkkkkA: int:w€üjkkkkkkkkkkkkkk$bcwfloat:wjjjjjjjjjjjjjjjjjjoreturn 0;:wkkA: float:w:wjjjjjjjjjjkkkkkkkkkkyjjjjjjjjpxcsw'jl.nbxkwwwhC,jlllllll.:wkkkkkkkodump($upsale);:whi->operation:woperaGkkkkkkkkyyplcwnominal_cost$hhh:wdd:wkkkkkkoujo'patient_id' €kb =.€kb> $patientId:wjjjjjjjkkkkkkkkkkkky13jGkkVpzzjjjjjA,'appointment_id' €kb€kb i€kbIS NOT NULL':w
contwkkkkkkkkkkw:S/tog€kbtal/appointment/gjjjjjjjjjjjjVj:€ku:€ku€ku:€ku€ku:€ku€ku€ku€kdj:€ku:w
/total:Nkkkkk:€ku€kuj@:jjjj@:k@::w
kjjjjjjjjjjj:€ku€ku:w
kjkkkkkkkkkkkkkkkkkkkkkk
wwwwwwwwkkkklliTotal jjjjb.:wkkkkkkkdatjjjjjjjjjjjpkkkkkkjjkky3jjjjpjjjjjjjjjjjjjjjpjjk$bbditj.i&nbsp;kkkkkkkkkkkkkkkkkkjwwwwwwwwbwi PercentavehrgjbhhiPercentage:wjo$potentiaincomehhhhhilIlxAClaimedPercentage = ($pot / $pobbbbbi$potentialIncomeCLame€kb€kb€kb€kblaimedÎºÎ¾Î¾ÎºÎ‘Ï„ÎµÎ½Ï„Î¹Î±Î»Î™)bbbbbi === 0€kb€kb€kb€kb= 0 ? 0 : Aa bbbwdwbbbveplllllhp0wwwwwwhhhhhhhhdwi $i* 100;:wjkjjjjjjjjkjyyp$hhliPercentage:w
jk$bbbhhct<%:wÎºÎ¾ÎºÎºÎºÎ¾ÎºÎºÎºÎºÎºÎºÎº$Î²Î²Î²Î²Î²Î²Î²Î²Î¹ÏÎ¿Î¸Î½Î´(€kb€kb€kb€kb€kb€kbround(A€kb, 2);:whhr1:wu:wÎ“ÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎºÎ¾Ï…26Î¾Î Î“ÎºÎºÎºÎºÎ´2ÎºÎ¸Î¾Î´Î¾Î¾Î¾Ï‚Ï‚Ï‚Ï‚ÏˆÎ¹'Î‘€kbÎ˜Ï€þXÏƒÎ±€kb€kb€kb€kb'Upsalesjjjjjjjjjjjjjwwwwcwupsaleswwwcwupsalejjbbbbb.kjjb.wwwi_completedbbjbcwupd€kbsalewwcwoperation->nominal_costjbbbbddkkkkkkkkkkjkdd.jjjjjjjjdd..:w
kkkkkkkkkkjj$i,ko'Operation'€kbs'+€kb=€kb€kb =€kb€kb' => []ko'contain' => kbbbcwUpsalesj$'aa'Operation'is:wjjkkkkkjhjjkkk>4jkwwli:wpatientablzijjjjjjjjjjjjvupsaletazijjjjjjjjjjjjjjjjjjy3jhjpkoj$bbbbcwhasOnewwcwUs€kbpsalesjjdd:wjjjjdd:wklhkkwwllllclcwMany:wu:wwwCOperations':w
o
kkk$bbbi->name:w
kkkyyjjjpkA,jwbcwUpsales$bbcwascbbbbbicompulllli_complee€kbted:wkkkkkkkkkjj$bbbblwi Xompl€kb€kb€kb€kb€kbCompleted:wjjjjjjjjjjjjjjjjjvmaincsj/tr.nnnnnnGkkkkkkkkkkkkbhhk$hkk$hi upsalesjjjjjjjjjjji lviewupsa30jyyhpkdd/>>.u:wwwwwwcwupsale:wkkkkkkkkkkkjwwbdt'hx:w:qavpatientcontpatientupsalectp:e %	€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kbtimeline.ctpyGP$bbbcwtimep€kblinegcjkgccujjjjjjjkkkkkkkkkuo<?= dd($€kbget_defined_vars());x kkkjjkA ?>:wu,a:wjkjyy
kp:wu,a:w:e sr	Te	P		d€kb	€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kbL		tre€kb€kb€kbTe									P		€kb	€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kb€kbPa		view_layout.ctplau€kbyoude/contentnnnnG:bd
yGPkjkddddjjjjjjjjjjjjjVGkkkdkkkkkkkkkkkkjjjjjjjjjjj>>>j==<<>>ko		$€kb<?=
Gkkkkkkkkkkkkkk20kyypkdd:wu,a:w
pkjkjd13jGdkukkkkkkkkkkkkkkkkkkkkkkkkkkkdj:wggO$€kb,ph$hhi)layoutbhr_hbbbcwPatientsI<?= A ?>:w0llllsphp:wusphppx:w$bbbgf
l
jjjjwwwwwi<?= $viewFile bbistrstr(wwhi, 'view_upsales') ?wi'wwi' : '' ?>:wllli			$hhhhi		kkkllllli			$hhhii		jyykkkpkdd$bbbbbbbbbllllcw.ctpjjjwi.ctp:wwwi!== false :wbbbbbbbbbbbKwwwwwwwdwhx:wkodd($viewGil€kb€kb€kbFile);:wI<?= A ?>bhhx:wbbcw€kbget_d()yykpwlsumpwwllllllllllllcw:wappcontrziGkkkkkkkkkkkkkkkkkkkkkkodd($get€kb€kb€kb€kbget_defined_vats€kb€kbrs());:wdj:wdd:wkkkkkp:wwwwbjjjjkjjo$currentView = hhhhhcw€kbActionA$event->getData("€kb);odd($currentAction);kkkkkkkdd:wjjjjj$bbCsu()->request;:wi->getParams('action'):wjkbhhhhhhhhhhhhhhcwData:whhhhlcwAction:wwblll€ühRequest:bd€ühserverrequest//aramnnnnnnnnnnnNNnnnnnnnnnnnzz/function.*aramnnnnnzznn$bbbblllcwParam:wjddkkkyyjjp<<$bbbbcwcurrentActionwwwbcw$currentAction:wkj
kkkkwwjwwwwwwwcwcurrentViewbbbdwdwwuxwwwbs ==hhhhhhcwActionwwwwlhdwxxxyyjjkklxyyjjjkpjddkwwwwwwwiUpsalesyyjjjp>>jkkkyyyjjjpkj>>kwwwdst>>wkwwwwwwllllcwFinancialData:w

patientviewjkjkd12jGkdjgg=Gkjjkk<G:w
ggyygguP,a:wviewfinP,ajd10jGkkdjggj<G:w
lajkkjjjkky2j2jpwwwwwwwwllllcwTimelinejbbci'Timelinewwwkbywjwwwwwwwwvep:wpatia€kbecontGkkkkkkkkkkkkyyjjpwwwiF€kbTimelinekkkjjjjjj$hhlilli,'Us€kbpsales':w
timelinkjddkjd12jGkkkkkkkkkkkkkkkkkkkkkkkkkkkkkdGggj<G:wjjjjjwwddwdduuuukkkkjddjjddd16jko	kwdT>hjko	<div cla€kb€kb€kbid="timeline"></div>:wjdd:Wvupsale:e %	€kb€kb€kb€kb€kb€kb€kb€kb€kb€kbtimeline.jsyGPziVjjjjjjjjdjc3jconsole.log('heyyo€kb€kb yo');:whjkkkkkk$Bbbcwtimeline:wjjjjjhhhhhia:w
:bd
kyy
ggP:wjjjjjjwdit:wkkkkkkkkkkkjyykppk$bbbvex€kb€kb€kbstatzijjjjjjjjjjjjjjjjjjjGgg:bdvstatisticjk€üwjjjjjjjjjjjjjkjjjjjjjjjjjkjjklokjjjdsddk$bbbcwhighcharts:wv
timehigh:E compo	ziojjjjjjjjjjjjkkkkkkkkkkkkkkkk:e opac€kb€kb€kb€kbac€kb€kbpack		/npm/grunstatistiwwwwwwwwihich€kb€kbghcharts/wwwdwhx:wu,a:w$hhhhhhx:wirakliin$bjbyykpkdd:wu,a:wiraklisctpjwwwwwwwwihighcharts/jbbw.:wu,a:wjjkdd:wdd:w:wyuu:wu:w
iraklishigh€kb€kb€kb€kbctpjkyjjjpkkdj:wu,a:wiraklidistigeoiraklidistjszijjjjjjjjjjjjj:bd:bd:bdiraklictpjyjjpkkdj:wu,a:wjwwwwwww:grep script..highcharts€kb€kb€kb€kb€kb€kb
timelikwwwwwwwwjywkPa/jbbllywPa/ddkkp:wjjjjj
timeo,pwwwwcwtimelinekdd:wGgg
timekkkkyyp$bbbbbdwx:w
kkkkkkkkkkkkkkkkkkkkkkkjgg=G:w€üwjjjjjjjjjjjjkkjjjjjjkkkkkkkkklojswebrootjsopzi:bd:E sr		€üwjjjjjjj%Highcharts:bd€üwjjjjjjjdHighchartsjjj%TimelineChart.phpphp	uiphp lxkkk€ürkkjdjkkkp:wjjjjjkjjljVGkkkdkkkjujda]da}kjhjkkA implements JsonSerializea€kb€kbablebbwi\lbbb€üc$€üc:w€üc0w€ücjluhk€üa€ürjjd2jlhjoreturn []';€kb€kb'€kb;kpulda}hpuupuuuopxGkkkwxoggGjgg=Gjjjjjjjjjjj<j.j>>k>>v
uuuuuujh<<jjj<<jjjjk.jjj.jjj.jjjjk.jjjj>>kkkjjjjjjk>>jjjjk>>j.jjj.j.jjj.j.jjjjjkk>>jkkjjjjjjjjjjjjjjjkkkk>21kjjjjjjjjjjjjjjjjjjjjjjjkkkkkkkkkkkkkkkkkkkkkjo0wqqysw'f:s=>j^qQjQQjjkQQjQQjQQjQQQQjQQQQjQQQzzjQQQjQQQkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkjjjVGkkkkkjjj:s/[\€kb/{€kb€kb€kb{/[/:€ku€kl€kl€kl€kb}€kr€kr€kb]:wkkkkkggj=GjjjjjjjjjddGkkkjkddkkkkkkkkkkkkkkkkkkkkjjjk$ijjjjjjjjjjjjjjjjjkikjjlli:wkkkkkkkkkkkkkkkkkkkkkkkk$kjjjjjjjjjjjjjjjjjjjjjjjjkjJx:wkkkkkkkkkkkkkkkkkkkkkkkkjpatiencontkjjo$chart€kb€kb€kb€kb€kbchartC€kb€kb€kb€kb€kb€kbtimeL€kblineChart = new Tim€kbmelineChart€üA();jjbbbbbhi[$hi]kwwwwbls=>$ijJukJxukyypkA,j0wwcwtimelineChartwww.w:w
jjjjjwwwi$bblik>j>>o		data=€kb-config=""i<?= ?>hijson_($timelineChart) :w
ukjiconfigkoconfit€kbg = $('#timeline').data('config');:wjjkjhx:wkkj
Gkkkkkkkkkkkkkkkkkkkkkkkkkkkkkwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwbbdat:wu:w€ü2€ü1kj:bd
u:w:wk:w
wwwwwcs"':wjhkj
kkkkkkkkkkkkkkkkkjkkkkkkkkkkj14j=16j:wjkkkkkv:newkc,phggjjjjjjjjjjjjkko'xoom€kb€kb€kb€kbzoomType':€kb => "€kb'x',ljjjjjjyjkjjjjkkyyjjpkkkkddpkA,jjjjA,j.jjj.jkkkkkbcwdatelin€kb€kbt€kb€kbtimejjjljjjjhly4jhp!QQQQkk$r[jjr],a,kkkjjjjI//:wkkkkk=4jjj:wljjjjjjhhjjjjjjky2jkpwcwlen€kbgendjbcweba€kb€kbnabledwwwca'falsebi :wlhljjjjjjjjjjhjjjjjy2j2jplcwtooltipjbcwstylewwwca][]kouujjgkca'[]ko'width' €kb => 300jjkkki jjjjjljjjjjjjhjjjjjo'x' =< €kb€kb> date('c');r,:wyyjjjjpjjjjpjjjjp:wlhkkkkkkkkkkkkwwwwwhKlllrt:wrulll/datefcrun;.n;.n:wn$i* €kb1000yyzzjjjjjjkpkddjjjjjVPjjjjjjkVP:wkkkkkkkkkkkjj$i + uhhhhhhhhbbbbKkjwwwli,new Data€kbe('10 years':a):wkjlli->getTimestamp()bbbla)bbbbbbi(:wuuuuuuu:wjjljkkkkkkkkky7jhojGkkkkkkkkkkkkkkkkkkkkkkkkkkkpQQQjjQQkkkJhhhxxxxxhjjQuuuuuuujj0wQQkkwwlllC[ jjhr]kkkr]kkkA€kb[k=8jjjjjkwwwwww:wjjjjjjjh*rUn.n.n.?:w:wkkkkkkkkjjjjI//jjjjjjj.j.j.j.j.jhxx:Wuuuuuuujjjjjdd:wjjjjjjjjjjo$dataPoints = [];ko$one, tw€kb€kb$twu€kbokJJkuuko$one = d3jjjjjjjjjjjkkkojjjjjjkddjjjjjjjjjjjjjjjjjjjjjjkwjwwwwwwwhdt'dt'jjjdi'kkkkkkkkkkkkkkkkkkkkkkjjkkkkkkopublic function __construct(array $data €kb) {}€ürkkkkkkwwwwCTimelineDatapoint[]w:wjjjjjjjjjjjjkkkkkkokkkkkkkk:e sr	Hi	TimelineChara€kbtDatapoint.php€ürkjoclass €üri o{}:wkkkjjjjwkklllllllllllllllliChart:wGkkkkkkkkky3jjkp€ükopublic function __construct(\DateTime $datetime, '€kbstring 'n€kb€kb$name, stribbbcwlabelu$ang $labelbbbbi = ''bbbbbb$a = '', string $description = ;€kb'' ){}€ürkjkkkkkkkkkkkkkkkkkjjjjjjjjjjjjjjjjj$ikoujkkkkkkwwwwwwwwwbbjjjjjjokkkkkkkkkkkkkkkkkkkkkkkkkkkA implements \JsonSerializable€ürGjkkkkkkkkkkkkkd2jjoreturn [];jjjjd3jkkkkkp=GkjWW$this-bbbbbbC$this->data€kb->getTimestamp()kkkkkkkkwwwi\Gkkkkkkkkkkkjj$bbCgethhhcw()-€kb * 1000,jhca'$t€kb€kb $this->namej/.j.khbbllcwlabeljllcwdescriptionkjjjjdjdd:wkkkkkkkkkkkkkkkkkkkkkkkkkkk$ca]$dataggjjjjjjjjjjjjjjI//yypxx$bbC[]konew D€kbkkkkkkkkbywjjjjjjjj$pa(new DateTime('1 year ago'),'sdf','a beje','beheme €kbtubehemesedinojabamahmi');r,yypwwhiswwwwia:ja;:wkkjwwwwwki\j.:wkkkkkdi):wjjjjjjjjjjkkkkkkwwwwKGkkkkwwwwwwithis->:wkkkkkkkkkkwwwwwwwwwwwwkwwwci'asereje:wbbbbdwjldw:w:e sr	Hi	Tim		€kb€kb€kb€kbFactory.phpiphp	€ürkkkkdjggpGkopublic function createFromAppointments(): arraybbia€kblliarray $appointmentso{}oukkjjikoretrurn a€kb€kb€kb€kb€kb€kburn array_map($€kbfunction($appointment) {}, $apoint€kb€kb€kb€kbpoi);koreturn []yykpkA€kbjjddkkJwwwwbcf)$appointment_€kb->date€kb€kb€kb€kb€kbac€kb€kb>actual_endwwwwca'$€kb $appointment->operationlllda'hx:wkkjjkjwklllllllllll$a€kb;:wk
contrkkkkkko$kkbiwwistatic :wkbywp-js$data =a $a::bb€üA($a€kbpatne€kb€kbient->appointments);ji$ixxxhi$databbb
jkkkkuuuuujjjuuuuuuukkd3jkwxxGkkkk$bithis->:wkkkkkkkkkkkkkkjjjjjjkkkdd2jdd:w
cont::wk
appoi
factjjjjjwwwwwwwwwwbbi_€kb€ühfrozendate€kb€kb€kb€kbtimegg:bd€ühfron€kbzentim/ateTimennnnnnnnnnn*nnnwwwwwwwi-<>€kb€kb>D€kbdate€kb€kb€kb€kbDateTime:wko$datetime = $appo->actual_end;ko/** @var Fron€kbzenTime€üA */hi$datetimea bbb€üjjwwwwwbbct,a€kbdate->get€kb€kb€kbko$datekjjwwwwwwiiigetkki->getTimestamp-jjddjwkkbbcwtimestampkddjwwwwwwwbbbhct,g€kbnew Date($timestamp):wjwbbbiTimebbwi\"::wkk$i():wjjbhjki(ukk0wwwwi(string):wuko$datetime = new D€kb\DateTime();jo$date->setTi($timestamp);jjwbblct,$datetime:wkkkkkoif ( €kb!dduA$appointment->actual_end){}€ükocontinue;:wbSreturn;a;:w
kkk
GkkkyyyyplcwcolorkA,jbbbhC'#eee'a,:w
config
contrkjko:wkk$bbbhhC]k$bblij>>kA => ['Upsales']:w
fajjjjjj$hi, '', bbbbbbbxxxx$bbxxx$chhi$colorhhhhh$hkko$color = $appoi->upsale ? "#000" : "#f00";hhhhi0lxulx:wjjbbbbjjjjjjjjjjjjjjjjjjjwwwwwwwwwdf,xwwwwwwwccolu$bbbcwcolorkkkkkkkkkkkkkkkkkd15jjjjd3j€ürkkkkkkddGjkkk$bbca'$€kb $this->colorkhhhhhddkkdd:wkkkkkjkkkkkkkkkkkkkkkkkkki\:wjkkkwwwwwwwwwwhhhrlrflllllllllr0:wuGkkkkyyPlcwnamellllllC'',j:w
/lennnn$bcwtrue:wku:wkkkkkkkkkkkkkkkkjjjjjjjjjjj:qa:q!:qa!timelineGzikkkkkkkkkkkkkkkko'moin€kb€kb€kbin' => 0:wkkkkkkkkko$min - ne€kb€kb€kb€kb= new DD€kbata€kbe9€kb('2910-€kb€kb€kb€kb019-91€kb€kb01-01 00P0€kb€kb:00€kb€kb€kb€kb€kb€kbT);€kb€kb0:€kb0:00:00)€kb');yypwcwmaz€kbxwwwwwwlcw12llcw31llcwiT23lli59llcw59jkjjjjjjjjjs$mixrnyy,yypkA,i=>€kb€kb->kkkkkkkkkkbbbiITimejhhh.kbi\jlh.jjjjjjjjj$igetTime()jhcwax->getTim():wkkkkkjjjjjbbbbcwaxjhcwminkbcwmax:wuuu$i * 1000j.ua * 100a0:wk:wkdd:uwwwwcwtrue:wjj0wwcwmax:wtimelinectpjjjjjkopo,pkddjjjjj:wu,a:wuukdj:wpatientcontGkkkkkkkkkk	appointmentrepoapprepo€üwjjjjjjj/rep€kb€kb€kbepo%AppointmentRepository.phpoperrepoyGP€ürjjjjjjjjjzijjjjjjk$bbcwAppointmentsjjjjkbbblllcwByPatientGroupedByYearjjkkwwbaint $idhcwpatientIdjkko/** @returns €kb€kb string[] */jj:wjjkko$kkki**ldf*lkpa€kb:wjjjjaddddjjjwwwcwyearbcwYEAR(scheduled_start)kkkwbbcwalljdjko'conditions' => []ko'patient_id' => $patientId:w
ggjjjjjjjjjjjjjjjj	jjjjkyyPwwwcwappointmentRepositorywwwcwAppointmentRe€ü€ürjjjjjjjjjjo$yu€kbears = $htis->this->appointmentRe->($p€kbid);:wodd9€kb($years);:w€ü2$bbkkkkkjjjj$bbhi(int):wkk0-jwcwappointmentsucwppo€kb€kb€kb$appointments = o'fields' kA" =€kb€kb€kb' =>jddkA[],kp''jjA'hsyear €kb€kb€kb€kb€kbE€kbYEAR(schedules_€kb€kbd_start) as u€kbyearjjjjjoreturn array_cpl€kb€kbolu($appointments, 'year');:wkkkkkkkbbbbbb>>i'' => :wllct'yearbbbbpbbdwdwhx:wdi'$vi'p-wwjhhP:wkkkkjddjjjjjjyypwcwyeara€kbs$b.:w
kA,j.:w
ctpoforeach(S<?php foruS<?phpp foreach($uears€kb€kb€kb€kb€kbyeras as€kb€kb€kb€kb€kb€kbars as $u€kbyera)€kb€kb€kbar): ?>-wwjhhxo<?php endu:q:xtimelinectpjjjjjjo<?php fore€kb€kb€kb€kbendforeach; ?>k>jo	<a €kb€kb€kb$this-S<€kb	<?= $tihs->€kb€kb€kb€kb€kbhis->Html->link($yue€kb€kbear, ['year' => $year€kb€kbar'€kb]) ?>:wu,a:wjjjjjjj$bbbbbbbhi'action' = €kb> 'viewTimeline', '€kb$patient->id, :w
paticontGkkkkkkkkkjjkkkkj	jjjjjjkkkkko$year = ddko$year = $this->request->getQ('year') ?: date('Y');jjjkko'consid€kb€kb€kbditions' =ddj$bbbli$ikouko'conditions' => ['E€kbYEAR9€kb(scheduled_start) > $€kb€kb€kb=€kb€kb' => $u€kbyear],:w:e .igt€kb€kb€kbgiti	jjjjjjyyppwkwwCdebug_kitjbbCsms_messenger:w:bd€kb€kbbd$bbbi(int):wu:wjjjjjjjjjhi, $yearbbbbbbGkkkkkkkkkkkkkkkkkwwwww€üc€üc€üczijjjjjjj$i, string $yearjj€ürjjjjjjbbbbbbbbbhhhhhlcs'"j.klcw$this-><€kbyear}bbbhi{j.wwwhhila}bblllcw$this-y€kb>yearkkkkkkkkjjjjjjjjjjjjj$bcw$this->yearAbbbhhx:w:w:qpackziwebziappjsGoconsole.log('filippos');:w€ülwebjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj
sasassjjjjjjjjjjjjjjjjjjjjjjjj$bi1:wu:wjjjjkkkkkkjwwwcwnone:wu:w
u:wkjkkkkkjj
conjoconsole.log(jjwwy$kkpa)€kb€kb);:wdd:w

app€kuu:wjdd:w
kkkjGkkkkk$hi --hot:w
appu:wu:w:e pu			n€kbm	gg:bdiuuuuoconos€kb€kbsole.log('ita a me mario');:wdd:w:e do		zidock €üwjjjjjjjjjjjjjjtqwi€kb€kb€kbwigzi€üwjjjjjjjjjjjjjjkkkkkkjjjjjjjjjjjjjjjjkkjozivtimzihkjotimelinctpjjjjjjjjjjkkkkjjjjyykkkkkkp>>jjjjjyyP>>kkkk>3jko<	€kb€kb€kbdiv class="col-6" €kb><>>>>.yyjpko</div>>>.k>>jj>3jjjkkkyyjjjjpkkkk>><<.:wu,a:wjjjjjjk$bbcwrow:wjw,gjGkgg/twig€kb€kb€kb€kbctpjbbzz
o:whh$hhimd-jjjhh.:wllli styul€kb€kble="text-align:right":wjjw$bba,[]i'class'+€kb=><€kbse€kb€kb 'se'ec€kb€kb€kblected':wbbwkki class="timeline-years":wbbbbbbbbbbbbbdW:wuu:wjjjkpatiecontkkkkkkkkkk	20jyypfsx;.:w$bbbhlwbca' ""ilca'ca" '€kb$yeark0wwwwwwwwitab~l€kb€kbl~jb*Ncwtan€kbbYnucwtabU€kbYearnn.nwwbi == $tabYear ? 'current€kb€kb€kb€kb€kb€kb€kbselected' : '':wkki clas=€kbs="timeline-years'€kb":wmaicsGo.timeline-e€kbyears selectedbi.A {}kobackground-color: #ddd;padding: 1px;:w:w90wwwwwwwwwbwli timeline-yearsfcdt>:w:wtimelinechazi:e sr	Hi	AnnualTimelineCc€kbhart.jjjjjjjjjjjjjjjjjjjtimelinzidatapozidatapofazijjjjjjjjjjjjjjjjjjjjjkkwwwwwwwwwwmaijjjjjjjjjjjjjjjjjjjjjjjjjkkkkkkk
kkkkkkkkkkkkwwyt;$bbbbbbvi"p:wiraklilaurakliscif€kbraklicontGkkkopublic function upsales(){}kkk	jjyjjjjjjkpkoi€kb€kboperationsjsziG:bdj$iraklijjjjjjjj$bbcwupsales:wkyypwwwwwwwwcwupsaleswwwwwwwwwwwwwwwwwwcwUl€kbpsaleswwwwwwwcwupsales:wu,a:wlaydefG11kyypwwwwwwwwwwwwcwUpsalesWWWWWWlcwupsales:wu,a:woperationc:w %	upsales.ctpu,a:wupsalectp€ühupsalectpjjkkjd2jj$bbbbbwcwUpsalesjdj:wu,a:w:w€ü:w:wkjpatienindejjjjjjjjjjjjjkyatpujopkoj=Gj<ituk<it.ujjj$Bbbbbcf)__('Patient')jwwwwd5jjjjjjjjd10jkwwwwwwwwwwcwlinkllllwwcwfist€kb€kbrst_name.' '.$patient->last-na€kb€kb€kb)_€kb€kb_namellllci] 'contrller' => 'Patients'bbbbhhhhiowwwwwli, 'action' => 'viewaUpsales', $patient->id kwwwwi				jgkhhhhi			kkjwwwwwwwwwi					wwwwwwwwwwwi		€kb€kb$bblli:wkjlli :w
jwwwwwlC[]);ko'current_a€kb€kbPage' => $currentPav€kbgekkyyplcwpatientswwC$this->pati->blllllldw()kjkkkkkA();:jjyypkA,j0wwcwpatientswwww.:wkkkww€üczijjjjjjjjjjjjjjjjjjjjjjjy5jGkkkjpjd3jkJhhhdt):w22ky2jGkkkkkp:wkkkkkkkkkk

kkkkkkkkkkk$bbbbbb
jjjjjkyykjpkIgvvugfgckjdd<<:w
patipatiencontjjjj	jy2j

jjjjjjjjjjpjda]hhxxkdd:wuggjjjjjjjjjjjjjjjjjjjjjjjjjjGkkkkkkkkko$this->loadModel('Patients"€kb');:wjkkjj$k$bbbli,'Patient':wjjjjjjjjjjyypkA,j0wwci] '_targe' => 'blanlk'hhxbbbbit:wbxwwwp:w
indeGkkkkkkkkkkky9jGkjp<G:w:
ddwwwwwwcwgetGroupedByUpsalesPaginates€kbdbblllllllllllllllllllllcwAQ€kb€kbQuery€kb€kb€kb€kb€kbo$klcwqueryjapeti€kb€kb€kbatients ->€kb€kb= $this->pa($query);kwdi):w:e ../kjkjbbipa->:wl€ückkkkkkddjjjp$bbbllC;kkkkkkkkkd5jdd:wjjkj$hi,[]ko'con€kb€kb€kbfields' =<€kb> []kjjjoukkkjo'grou' =€kb€kb€kbp €kb' => ['bbbbcwcontainwwAUpsales']ka,:Wkkkkd7jkdd:wupsalreoGkopublic function getGroupedByPatient()0wwwwbllliAllo{}iko$thisIreturn A-.€kb>table->find('al;€kbl', []);:wkoco€kb€kb'contan€kbin' => 'Patients':w
ggjjjjjjjjjjjjjjjjjjjjjjjjjj	jjjjyypwwwctRupsalewww.b~€ü€ürkkkkkkkkkkkkkkkjkd4jjjjjp:w€üjGkkkkkkkkkkkkkkkkkkkwwwwwwwcwupsalewwcwj0wwcwupsaabcwpatients:wkj:w
kkkkkkkkkwwwwkkkw*Ncwupsalesn.n.:wn.www*cwupsalen.n.n>nu.ju$bbbcwupsalejjjjjjk$bbipatient_:k0wwwwipatient->wwwwww.j$bbbb$hhhhhsuhs->:w
Gkkkkjo'grou'€kbp' => 'pait€kb€kbtient_id'ka,:wko'fields' => [],ko'pa€kb€kb€kb:s€kbwko'sum' => 'SUM(papatiecont	jjjjkk	jjjjjjjjjjjjjjjjjlljjwwwjjjwwwi[kkkkdjjjjko]a,k€üA€kb .€kb=> ['hhhhhC,'Operations':wkkkko'sum' => 'Operations.nominal_o€kbcostbbbiSUM(A)':w
kkkkkkkkkkyyp$bbbbbbcwsuamwwcwSumjjjjjjjjjjkkky6j6jpjkci}kjcit{€kb><€kb€kb<?= =>€kb€kb€kb ?>hhi$€kb $upsale->sua,:Wrm:wA,pa€kb€kb'patient':wi_id:wkkd3j:wu:wkjjjci'Patients:wucwPatients.first_nameA,yyppk$bbct_lastjbcwid:wjjjjjjhhhhi[A, 'compo€kb€kb€kb€kb€kbcompl€kb€kb€kb€kb€kbadate_completed']:wkkkkkkkkkyyplllllllllliselect bbbbbcwincompletewwwwwbi($hi)bbbbbbwwwwwwk$hhi  fr€kb€kb€kb€kb from Opersti€kb€kbat€kb€kb€kbations where kjkukjkk
jjjjjjjkkkkkkkkkkkwwcwupsalesjdd:w
kkkwcwa€kb$all = bjkjjjddjjjjjkkkkkkkky12j12jpkojlcwincompletejjjdjjjjjkkjjjjjkoujA,'conditions' => []ko'date_completed' €kb€kb IS NIT€kb€kbPOT€kb€kb€kbOT NULL':wjjoreturn kkokkkkkkkkkkkkkkkkkkk$i->toArray()jjjjjjjjjjjjjjjjj.:wjjjkkoforeach( $all as $upsael€kb€kble) {}ko$aupsle€kb€kbale->incomplete = ko$in€kb€kbupsaleIncomplete = array_filter($incomplete, function ($item) {});koreturn $item->patiend€kbti€kb->id == $upsale->patne€kb€kbient->id;ji[0]uoif ( $bbicount(A)kkkkkkkkkkkkkkkkkkkkk0wlxxjjjjjjjjjjjjjjjjjjjkwwllllllxx~jjjllllllllllxx~A )i> 0ko$upsale->inco€kb€kb€kb€kbcop€kbmpleted = 0;jA ) {}ko$upsale->completed = $upsaleCom[0]->sum;jjddkjkkkkllljjjjjjjA$all;:repozi::qwkkkkkxk$i) :wjdd:wkj:k4juu:wkjjkkkkkxx:wjkwwwwwa use ($upsale):wkkkkkkkkkkkkkkkkkkkkk€üjx:w
upkkkkkkkkkkkkjkwwwwkwwwhcitPatientjcitSumyypjddk$bbbbwcwCompletedGkjjjjjjjjjjjjjyyp$bbbcwcompleted:w:wjjjjjjdatk.:w168Gkodd($upsaleComplete);0wwbcwdump:wS$completed = array_pop($upsa);jbbbbct-completedkkkkkkkkkkkkk$bbda'hxkkkkkkkkkkkkkkwwda'blx:wkkkkkkkkkkkkkkkkkkyyp$bbbcwPercentageGkkkkyypwwwcit<doi€kb€kbiv></div>>>..wlllli			kkwwllli			>jyjkjp>jki style="background-coor:€kb€kb€kblor:light-grey"j.:wo			ui;height:24px;width:75%:wbbbbbbbbbbbdwx:w
cssjjjjjjwwwyt;kj$bbbbbbbbbbcepuvepve"kjbvePkbbbvt"Pa99:wbllllllcw11:whcw33:wjo						<?p€kb= $upsale->percentage ?>k$bbcwlxi<?= ?>%hhhi $upsale->percentage:w>>:w
Gkkkkkkkkjjjo$updal€kb€kb€kbsa;e€kb€kble->percentage = $upsale->sum / $€kb€kb€kb€kb€kb€kb€kbcompleted / $upsale->sum;:wAi * 100:wbbbbbbbbbbbyst;)iround:wjk$bl0wwwwwicollor€kb€kb€kbor:#fff;font-weih€kbght:bold;padding:5px;:w$j$a%:wkwwwwwwwlidrop-sa€kbja€kb€kbhadow:0€kb0 0 0 #000'€kb';€kb€kb;:wubbbbbbbbbbbbcw000:wkkkjjjjosor€kb€kb€kbusort($all)€kb €kb, function ($a, $b) {});koreturn $a->percentage <-€kb€kb=€kb<=> $b->percentage;:wbbbrabbukbbrabbbrb:wuu:wjjjjjjjjkkkkkkkkkkkkjjjyypwwwcwremainingwwC$upsale-=>€kb€kb>sum - $upsa->completed;:wkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk/sumcwpo€ükjucwpotentialnnn.n.jjjkkkkkkkkkkkkk:w
ggn.jyypkkkkkkkkkkkkkkkkyypkkkwwwwjwwwbcwPotentialjjbcwRemainingjjjjjjjjjjjjjjjjbwwwwwwcwremaining:wkkkkkk:q